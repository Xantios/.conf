# for those of you who are looking for the old generator

###### 
# @TODO: Refactor this to a plugin ? or maybe just drop it ?
#### 
func newhomestead()
{
    # where are we?
    PWD=`pwd`
    # Grep last part of dir for projectname
    PROJNAME=`basename $PWD`
    # Projname.dev is a swifty hostname
    # Google apperantly bought the rights to dot-app >.> grrr
    PROJHOST=$PROJNAME.dev
    # just for consistency
    PROJHOST=`echo "$PROJHOST" | awk '{print tolower($0)}'`
    echo Downloading homestead base package
    # Grep homestead
    composer require laravel/homestead --dev > /dev/null
    # Gen base files
    php vendor/bin/homestead make > /dev/null
    echo Setting hostname to $PROJHOST
    sed -i '' "s/homestead.app/$PROJHOST/g" homestead.yaml
    # Mod path a bit so we can stick everything into one folder
    sed -i '' "s/public/$PROJNAME\/public/g" homestead.yaml
    # Collect IP data 
    HOMESIP=`cat Homestead.yaml | grep ip | cut -d\" -f2`
    echo Done.
    echo 
    echo Add the following line to hostfile:
    echo $HOMESIP $PROJHOST
    echo
    echo Or setup DNSMasq 
    echo https://passingcuriosity.com/2013/dnsmasq-dev-osx/
    echo
    echo Now run vagrant up
    echo 
    echo Install laravel? run newlara command
}

# Same story as above
func newlara()
{
    # Where are we?
    PWD=`pwd`
    # Grep last part for project name
    PROJNAME=`basename $PWD`
    # To lowercase please
    PROJNAME=`echo $PROJNAME | awk '{print tolower($0)}'`
    ssh vagrant@localhost -p 2222 composer create-project --prefer-dist laravel/laravel $PROJNAME/$PROJNAME
}
